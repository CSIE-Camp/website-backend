datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model CampStatus {
  id                Int       @id @default(1)
  Apply_Deadline    DateTime?
  AllowRegistration Boolean   @default(false)
  AllowStatusLookup Boolean   @default(false)
}

model Tokens {
  Token     String   @id
  AccountId String   @unique
  CreatedAt DateTime @default(now())
}

model Accounts {
  id             String           @id @default(cuid())
  CreatedAt      DateTime         @default(now())
  Email          String           @unique
  Password       String
  Accepted       Boolean          @default(false)
  Role           Roles            @default(PARTICIPANT)
  Profile        Profiles[]
  PaymentDetails PaymentDetails[]
  Logs           Logs[]
}

//Accounts and Profile should have a 1-1 relationship
model Profiles {
  id                            Int       @id @default(autoincrement())
  Name                          String?
  Gender                        String?
  School                        String?
  DOB                           DateTime?
  Validated_ID                  String?
  Unvalidate_ID                 String?
  Number                        String?
  Facebook                      String?
  Diet                          String?
  Diseases                      String?
  COVID_14Days                  Boolean   @default(false)
  SelfPortrait                  String?
  ParentialConsent              String?
  Emergency_ContactName         String?
  Emergency_ContactNumber       String?
  Emergency_ContactRelationship String?
  Emergency_BloodType           String?
  PassedTest                    Boolean   @default(false)
  Github                        String?
  Discord                       String?
  AccountId                     String    @unique
  Accounts                      Accounts? @relation(fields: [accountsId], references: [id])
  accountsId                    String?
}

model PaymentDetails {
  id                  Int       @id @default(autoincrement())
  TransferDate        DateTime
  AccountName         String
  Account_Last5Digits String
  Account             Accounts? @relation(fields: [AccountId], references: [id])
  AccountId           String?
}

model Logs {
  id          Int       @id @default(autoincrement())
  Accounts    Accounts? @relation(fields: [AccountId], references: [id])
  AccountId   String?
  AccountType String
  Details     String
  TimeStamp   DateTime  @default(now())
}

enum Roles {
  DEVELOPER
  ADMIN
  STAFF
  PARTICIPANT
}
